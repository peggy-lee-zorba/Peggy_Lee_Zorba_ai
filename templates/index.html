<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Business Analytics Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header">
        <h1>üìà Business Analytics Dashboard</h1>
        <button id="signInBtn" class="btn">üîê Sign In</button>
    </div>

<div class="grid">
    <div class="card">
        <h3>üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h3>
        <p class="card-subtitle">–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ USD</p>
        <table>
            <thead>
                <tr><th>–í–∞–ª—é—Ç–∞</th><th>–ö—É—Ä—Å</th></tr>
            </thead>
            <tbody>
                {% for curr, rate in rates.items() %}
                <tr><td>{{ curr }}</td><td>{{ "%.4f"|format(rate) }}</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card">
        <h3>üå§Ô∏è –ü–æ–≥–æ–¥–∞</h3>
        <div class="weather-info">
            <div class="weather-item">
                <strong>–ì–æ—Ä–æ–¥</strong>
                <div class="weather-value">–ú–æ—Å–∫–≤–∞</div>
            </div>
            <div class="weather-item">
                <strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</strong>
                <div class="weather-value">+18¬∞C</div>
            </div>
            <div class="weather-item">
                <strong>–£—Å–ª–æ–≤–∏—è</strong>
                <div class="weather-value">‚òÅÔ∏è –û–±–ª–∞—á–Ω–æ</div>
            </div>
        </div>
    </div>
</div>

    <!-- –ë–ª–æ–∫ –ò–ò ‚Äî –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç -->
    <!-- –ë–ª–æ–∫ –ò–ò ‚Äî –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç -->
    <div id="aiSection" class="ai-section" style="display: none;">
        <h2>ü§ñ –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å DeepSeek (—á–µ—Ä–µ–∑ OpenRouter)</h2>
        
        <div id="contextInfo" style="margin-bottom: 15px; display: none;">
            <div style="font-size: 12px; color: #6B7280; margin-bottom: 5px;">
                üí≠ –ö–æ–Ω—Ç–µ–∫—Å—Ç: <span id="contextSize">0</span>/<span id="maxContext">16</span> —Å–æ–æ–±—â–µ–Ω–∏–π
            </div>
            <div style="height: 4px; background: #E5E7EB; border-radius: 2px; overflow: hidden;">
                <div id="contextProgress" style="height: 100%; background: #10B981; width: 0%; transition: width 0.3s;"></div>
            </div>
        </div>

        <div id="contextWarning" class="warning-banner" style="display: none;">
            ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—á—Ç–∏ –∏—Å—á–µ—Ä–ø–∞–Ω! –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω—ã.
        </div>

        <textarea id="userInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–∫ –ø–æ–≤–ª–∏—è–µ—Ç —Ä–æ—Å—Ç –¥–æ–ª–ª–∞—Ä–∞ –Ω–∞ —Ä—ã–Ω–æ–∫?"></textarea>
        
        <div style="display: flex; gap: 10px; margin: 10px 0;">
            <button onclick="askAI(event)" class="btn">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
            <button onclick="clearContext()" class="btn" style="background: #6B7280;">üîÑ –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç</button>
        </div>
        
        <div id="aiResponse" class="ai-response"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">üîê –í—Ö–æ–¥ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤</h3>
            <p style="color: var(--text-secondary); margin-bottom: 24px;">–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
            <input type="text" id="username" placeholder="–õ–æ–≥–∏–Ω" required>
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
            <button onclick="submitLogin()" class="btn" style="width: 100%; justify-content: center; margin-top: 16px;">–í–æ–π—Ç–∏</button>
            <div id="loginError" class="error"></div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>